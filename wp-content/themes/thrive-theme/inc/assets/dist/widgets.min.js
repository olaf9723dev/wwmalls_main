(t=>{const e={init:function(){const e=t(".wrap a.page-title-action");this.$add_button=t("<button>",{class:"page-title-action ttb-add-sidebar",text:"Add new Widget Area"}).insertAfter(e).on("click",(()=>{const t=prompt("Please enter widget area name:");"string"==typeof t&&t.length>0&&(this.toggle_add_button(!0),this.add(t))})),t('[id^="thrive-theme-sidebar-"]').each((function(){const e=t(this),a=e.attr("id").replace("thrive-theme-sidebar-",""),i=e.find(".sidebar-name h2").text().trim();a&&(e.find(".sidebar-description .description").before(t("<button>",{type:"button",class:"button-link button-link-delete ttb-sidebar-remove",text:"Remove Widget Area",style:"float:right","data-id":a})).before(t("<button>",{type:"button",class:"button-link ttb-sidebar-rename",text:"Rename",style:"float:right;margin-right: 10px;","data-id":a})),e.find(".sidebar-name").append(t("<h2>",{html:`<input type="text" class="ttb-sidebar-input" value="${i}">\n\t\t\t\t\t\t\t\t<button style="margin-left: 10px;" class="button button-primary ttd-name-save" data-id="${a}">Save</button>`,class:`ttb-name-edit-${a}`,style:"display:none"})).find("h2").addClass(`ttb-sidebar-name-${a}`))})),t(document).on("click",".ttb-sidebar-remove",(e=>{const a=t(e.target).parents(".widgets-sortables");a.find(".sidebar-name .spinner").css("visibility","visible"),a.find(".widget-control-remove").trigger("click"),this.toggle_add_button(!0),this.remove(e.target.dataset.id)})).on("click",".ttb-sidebar-rename",(e=>{const a=e.target.dataset.id;t(`.ttb-sidebar-name-${a}`).hide(),t(`.ttb-name-edit-${a}`).show().find("input").focus()})).on("click",".ttd-name-save",(t=>{const e=t.target.dataset.id,a=t.target.previousElementSibling.value;this.toggle_add_button(!0),this.save_name(e,a)}))},toggle_add_button:function(t){t?this.$add_button.attr("disabled",!0):this.$add_button.removeAttr("disabled")},add:function(e){t.ajax({headers:{"X-WP-Nonce":ttb_widgets.nonce},data:{name:e},url:ttb_widgets.route,method:"POST"}).done((t=>{location.reload(!0)})).fail(console.error).always((()=>this.toggle_add_button(!1)))},remove:function(e){t.ajax({headers:{"X-WP-Nonce":ttb_widgets.nonce},data:{id:e},url:ttb_widgets.route,method:"DELETE"}).done((()=>{t(`[id^="thrive-theme-sidebar-${e}"]`).parent().remove()})).fail(console.error).always((()=>this.toggle_add_button(!1)))},save_name:function(e,a){t.ajax({headers:{"X-WP-Nonce":ttb_widgets.nonce},data:{id:e,name:a},url:ttb_widgets.route+"/title",method:"POST"}).done((()=>{t(`.ttb-sidebar-name-${e}`).html(`${a}<span class="spinner"></span>`).show(),t(`.ttb-name-edit-${e}`).hide()})).fail(console.error).always((()=>this.toggle_add_button(!1)))}};t(document).ready(e.init.bind(e))})(jQuery);
!function(){var t,e={4367:function(t,e,n){const o=n(4045),s=n(5851);t.exports=Backbone.Collection.extend({model:s,parse:function(t){return _.map(t,(function(t,e){return new s({name:e,tools:new o(t)})}))}})},4045:function(t,e,n){t.exports=Backbone.Collection.extend({model:n(3877)})},4758:function(t,e,n){"use strict";function o(t){let e="";switch(t){case"Activated":e="Get Started";break;case"Installed":e="Activate";break;case"Not installed":e="Install Now";break;default:e="Learn More"}return e}function s(t){let e="";switch(t){case"Activated":e="tve-action-btn-get-started";break;case"Installed":e="tve-action-btn-activate";break;case"Not installed":e="tve-action-btn-install-now";break;default:e="tve-action-btn-learn-more"}return e}function a(t){return"Activated"===t?"tve-btn-get-started":"tve-btn-info"}function r(t){let e=t.get("status"),n=t.get("plugin_slug");const r=function(t,e){let n="";switch(t){case"Activated":n=e.get("dashboard_uri");break;case"Not installed":n=e.get("install_uri");break;default:n=e.get("landing_url")}return encodeURIComponent(n)}(e,t);return'<div class="growth-tool-action"><button class="tve-btn '+a(e)+" "+s(e)+'" data-url="'+r+'" data-plugin-slug="'+n+'">'+o(e)+"</button></div>"}function i(t){let e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"_self";const n=t.target.dataset.url,o=decodeURIComponent(n);window.open(o,e)}function l(t){t.hasClass("tve-action-btn-install-now")&&t.removeClass("tve-action-btn-install-now"),t.hasClass("tve-action-btn-activate")||t.addClass("tve-action-btn-activate")}function c(t){t.hasClass("tve-btn-info")&&t.removeClass("tve-btn-info"),t.hasClass("tve-action-btn-activate")&&t.removeClass("tve-action-btn-activate"),t.hasClass("tve-btn-get-started")||t.addClass("tve-btn-get-started"),t.hasClass("tve-action-btn-get-started")||t.addClass("tve-action-btn-get-started"),t.text("Get Started")}n.r(e),n.d(e,{getActionClass:function(){return s},getButtonClass:function(){return a},getButtonHtml:function(){return r},getButtonText:function(){return o},redirectToUri:function(){return i},updateButtonClassAfterActivated:function(){return c},updateButtonClassAfterInstallation:function(){return l}})},5851:function(t,e,n){const o=n(4045);t.exports=Backbone.Model.extend({defaults:{name:"",tools:new o}})},3877:function(t){t.exports=Backbone.Model.extend({defaults:{name:"",path:"",icon:"",status:"",summary:""}})},1338:function(t){var e;e=jQuery,t.exports=Backbone.View.extend({template:_.template('<select id="tools-category-select" class="tools-category-select"></select>'),el:".tvd-filter-tools",events:{"change #tools-category-select":"filterTools"},initialize:function(t){this.toolsCategory=JSON.parse(TVD_AM_CONST.tools_category),this.growthToolsView=t.growthToolsView,this.render()},filterTools:function(){this.growthToolsView.filterTools()},render:function(){const t=e(this.template());return t.append('<option value="">All Tools</option>'),_.each(this.toolsCategory,(function(e){t.append(`<option value="${e}">${e}</option>`)})),this.$el.html(t),this.$("#tools-category-select").select2(),this}})},8623:function(t){jQuery,t.exports=Backbone.View.extend({template:_.template('<input type="search" id="tvd-search-growth-tools" name="tvd-search" placeholder="Search..."><button type="button" class="tvd-tools-search-icon"><svg class="td-icon"><use xlink:href="#icon-tvd-search"></use></svg></button>'),el:".tvd-search-elem",events:{"click .tvd-tools-search-icon":"searchTools","keyup #tvd-search-growth-tools":"handleSearchKeyPress"},initialize:function(t){this.growthToolsView=t.growthToolsView},searchTools:function(){this.growthToolsView.filterTools()},handleSearchKeyPress:function(t){13===t.keyCode&&this.growthToolsView.filterTools()},render:function(){return this.$el.html(this.template()),this.$el}})}},n={};function o(t){var s=n[t];if(void 0!==s)return s.exports;var a=n[t]={exports:{}};return e[t](a,a.exports,o),a.exports}o.d=function(t,e){for(var n in e)o.o(e,n)&&!o.o(t,n)&&Object.defineProperty(t,n,{enumerable:!0,get:e[n]})},o.o=function(t,e){return Object.prototype.hasOwnProperty.call(t,e)},o.r=function(t){"undefined"!=typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(t,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(t,"__esModule",{value:!0})},(t=jQuery)(document).ready((()=>{const e=o(4367),n=o(8623),s=o(1338),{getButtonHtml:a,redirectToUri:r,updateButtonClassAfterActivated:i,updateButtonClassAfterInstallation:l}=o(4758),c=new e,u=new(Backbone.View.extend({el:".growth-tools-list",events:{"click .tve-action-btn-learn-more":"redirectToUri","click .tve-action-btn-get-started":"redirectToDashboard","click .tve-action-btn-install-now":"initInstallation","click .tve-action-btn-activate":"activatePlugin"},initialize:function(){TVE_Dash.showLoader(!0);const t=this;c.url=TVD_AM_CONST.baseUrl,c.fetch({success:function(e){0===e.length?(t.$el.empty(),t.$el.append('<div class="growth-tools-not-found"><span>No tools found!!</span></div>')):(t.categories=e,t.filteredTools=e,t.render())},error:function(t,e){console.error("Error fetching data:",e)},complete:function(){TVE_Dash.hideLoader()}})},filterTools:function(){let e=t("#tools-category-select").val().trim(),n=t("#tvd-search-growth-tools").val().trim().toLowerCase();TVE_Dash.showLoader(!0);const o=this;c.url=TVD_AM_CONST.baseUrl+"?category="+e+"&query="+n,c.fetch({success:function(t){0===t.length?(o.$el.empty(),o.$el.append('<div class="growth-tools-not-found"><span>No tools found!!</span></div>')):(o.categories=t,o.filteredTools=t,o.render())},error:function(t,e){console.error("Error fetching data:",e)},complete:function(){TVE_Dash.hideLoader()}})},redirectToUri:function(t){r(t,"_blank")},redirectToDashboard:function(t){r(t)},initInstallation:function(e){e.preventDefault();const n=t(e.currentTarget),o=n.text(),s=t(e.currentTarget).data("plugin-slug");if(n.text("Installing..."),!s)return void console.error("Plugin slug is missing.");const a=TVD_AM_CONST.baseUrl,r={plugin_slug:s,action:"install"},i={method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify(r)};let c=this;fetch(a,i).then((t=>{if(!t.ok)throw new Error("Failed to install plugin.");return t.json()})).then((t=>{t&&null!=t&&t.dl?c.installPlugin(e):(l(n),c.activatePlugin(e))})).catch((t=>{console.error("Error installing plugin:",t),n.text(o)}))},installPlugin:function(e){const n=t(e.currentTarget),o=n.text(),s=t(e.currentTarget).data("plugin-slug"),a=TVD_AM_CONST.baseUrl,r={plugin_slug:s,action:"install"},i={method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify(r)};let c=this;fetch(a,i).then((t=>{if(!t.ok)throw new Error("Failed to install plugin.");return t.json()})).then((t=>{l(n),c.activatePlugin(e)})).catch((t=>{console.error("Error installing plugin:",t),n.text(o)}))},activatePlugin:function(e){e.preventDefault();const n=t(e.currentTarget),o=n.text(),s=t(e.currentTarget).data("plugin-slug");if(n.text("Activating..."),!s)return void console.error("Plugin slug is missing.");const a=TVD_AM_CONST.baseUrl,r={plugin_slug:s,action:"activate"},l={method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify(r)};fetch(a,l).then((t=>{if(!t.ok)throw new Error("Failed to install plugin.");return t.json()})).then((t=>{i(n)})).catch((t=>{console.error("Error installing plugin:",t),n.text(o)}))},render:function(){if(this.$el.empty(),!this.filteredTools||0===this.filteredTools.length)return this.$el.append('<div class="growth-tools-not-found"><span>No tools found!!</span></div>'),this;const e=this;return this.filteredTools.each((function(n){const o=t('<div class="growth-tools-category-item"></div>'),s=t('<span class="category-title">'+n.get("name")+"</span>");o.append(s);const r=n.get("tools");if(r&&r.length>0){const e=t('<div class="growth-tools-card"></div>');r.forEach((function(n){const o=t('<div class="tvd-flex tvd-flex-row tvd-space-between growth-tools-card-item"></div>'),s=t('<div class="growth-tool-logo"><svg class="td-icon"><use xlink:href="#'+n.get("icon")+'"></use></svg></div>'),r=t('<div class="growth-tool-content"><span class="tool-name">'+n.get("name")+'</span><br/><span class="tool-summary">'+n.get("summary")+"</span></div>"),i=t(a(n));o.append(s,r,i),e.append(o)})),o.append(e)}e.$el.append(o)})),this}})),d=new s({growthToolsView:u}),h=new n({growthToolsView:u});d.render(),h.render(),u.render()}))}();
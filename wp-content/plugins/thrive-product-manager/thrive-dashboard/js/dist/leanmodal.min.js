!function(){var e,o,t;e=jQuery,o=0,t=0,e.fn.extend({openModal:function(a){var i=e("body").css("overflow","hidden"),n=i.find("#wpbody"),c="tvd-materialize-lean-overlay-"+ ++t,s=e(this),d=e('<div class="tvd-lean-overlay"></div>'),l=++o;d.attr("id",c).css("z-index",1e4+2*l),s.data("tvd-overlay-id",c).css("z-index",1e4+2*l+1),n.length?n.append(d):i.append(d),a=e.extend({opacity:.7,top:"10%",in_duration:350,out_duration:250,ready:void 0,complete:void 0,dismissible:!0,starting_top:"4%",overlay_class:""},a),d.addClass(a.overlay_class),a.dismissible&&(d.click((function(){s.closeModal(a)})),e(document).on("keyup.leanModal"+c,(function(e){27===e.keyCode&&s.closeModal(a)}))),s.on("click.close",".tvd-modal-close",(function(e){s.closeModal(a)})),d.css({display:"block",opacity:0}),s.css({display:"block",opacity:0}),d.velocity({opacity:a.opacity},{duration:a.in_duration,queue:!1,ease:"easeOutCubic"}),s.data("tvd-associated-overlay",d[0]),s.hasClass("bottom-sheet")?s.velocity({bottom:"0",opacity:1},{duration:a.in_duration,queue:!1,ease:"easeOutCubic",complete:function(){"function"==typeof a.ready&&a.ready()}}):(e.Velocity.hook(s,"scaleX",.7),s.css({top:a.starting_top}),s.velocity({top:a.top||"10%",opacity:1,scaleX:"1"},{duration:a.in_duration,queue:!1,ease:"easeOutCubic",complete:function(){"function"==typeof a.ready&&a.ready()}}))}}),e.fn.extend({closeModal:function(t){var a=e(this),i=a.data("tvd-overlay-id"),n=e("#"+i);if(t=e.extend({out_duration:250,complete:void 0},t),e("body").css("overflow",""),a.off("click.close"),e(document).off("keyup.leanModal"+i),n.velocity({opacity:0},{duration:t.out_duration,queue:!1,ease:"easeOutQuart"}),o--,a.hasClass("bottom-sheet"))a.velocity({bottom:"-100%",opacity:0},{duration:t.out_duration,queue:!1,ease:"easeOutCubic",complete:function(){n.css({display:"none"}),"function"==typeof t.complete&&t.complete(),n.remove()}});else{if(0===t.out_duration)return a.hide(0),"function"==typeof t.complete&&t.complete(),void n.remove();a.velocity({top:t.starting_top,opacity:0,scaleX:.7},{begin:function(){"function"==typeof t.beforeClose&&t.beforeClose()},duration:t.out_duration,complete:function(){"function"==typeof t.complete&&t.complete(),e(this).css("display","none"),n.remove()}})}a.trigger("closeModal")}}),e.fn.extend({leanModal:function(o){return this.each((function(){var t=e(this),a=e.extend({starting_top:"4%"},o,t.data());t.click((function(o){a.starting_top=(e(this).offset().top-e(window).scrollTop())/1.15,a.elem=t;var i=t.attr("href")||"#"+t.data("target");return e(i).openModal(a),o.preventDefault(),o.stopPropagation(),!1}))}))}})}();
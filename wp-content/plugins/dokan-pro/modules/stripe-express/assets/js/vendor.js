!function(e){"use strict";const n={init:function(){let n=this;e("#dokan-stripe-express-account-connect").on("click",n.signUp),e("#dokan-stripe-express-dashboard-login").on("click",n.expressLogin),e("#dokan-stripe-express-account-disconnect").on("click",n.disconnect),e("#dokan-stripe-express-account-cancel").on("click",n.cancelAccount)},signUp:function(s){s.preventDefault(),n.hideMessage(),n.showProcessing();let o=e("#dokan_stripe_express_vendor_country").length?e("#dokan_stripe_express_vendor_country").val().trim():void 0;if(e("#dokan_stripe_express_country_select_error").length&&e("#dokan_stripe_express_country_select_error").remove(),void 0!==o&&!o.length&&e("#dokan_stripe_express_vendor_country").length)return e(`<p class="error" id="dokan_stripe_express_country_select_error">${dokanStripeExpressData.i18n.country_select_error}</p>`).insertAfter("#dokan_stripe_express_vendor_country"),void n.hideProcessing();e.post(dokanStripeExpressData.ajaxurl,{country:void 0!==o?o:"",action:"dokan_stripe_express_vendor_signup",url_args:window.location.search,_wpnonce:dokanStripeExpressData.nonce},(function(e){e.success?window.location.replace(e.data.url):(n.hideProcessing(),n.showMessage(e.data,!0))}))},expressLogin:function(s){s.preventDefault(),n.hideMessage(),n.showProcessing(),e.post(dokanStripeExpressData.ajaxurl,{action:"dokan_stripe_express_get_login_url",_wpnonce:dokanStripeExpressData.nonce},(function(e){e.success?window.open(e.data.url,"_blank"):n.showMessage(e.data,!0),n.hideProcessing()}))},disconnect:function(s){s.preventDefault(),n.hideMessage(),n.showProcessing(),e.post(dokanStripeExpressData.ajaxurl,{action:"dokan_stripe_express_vendor_disconnect",_wpnonce:dokanStripeExpressData.nonce},(function(e){e.success?(n.showMessage(e.data),window.location.reload(!0)):n.showMessage(e.data,!0),n.hideProcessing()}))},cancelAccount:async function(s){s.preventDefault(),n.hideMessage(),n.showProcessing();let o={title:dokanStripeExpressData.i18n?.cancel_onboarding?.title??"Cancel Onboarding",text:dokanStripeExpressData.i18n?.cancel_onboarding?.text??"Are you sure you want to cancel current onboarding process? Note that, you can't undo this action.",icon:"info",width:600,showCloseButton:!1,showCancelButton:!0,cancelButtonText:dokanStripeExpressData.i18n?.cancel_onboarding?.cancelButtonText??"No",confirmButtonText:dokanStripeExpressData.i18n?.cancel_onboarding?.confirmButtonText??"Yes, Cancel Onboarding",confirmButtonColor:"#1A9ED4",showLoaderOnConfirm:!0,allowOutsideClick:!1};dokanStripeExpressData.i18n?.cancel_onboarding?.is_setup_wizard&&delete o.icon;const t={action:"dokan_stripe_express_cancel_onboarding",_wpnonce:dokanStripeExpressData.nonce};await Swal.fire({...o,preConfirm:()=>e.post(dokanStripeExpressData.ajaxurl,t).done((e=>e)).always((()=>{n.hideProcessing()})).fail((e=>{let n=dokan_handle_ajax_error(e);return n&&Swal.fire(dokanStripeExpressData.i18n?.cancel_onboarding?.errorMessage??"Something went wrong!",n,"error"),!1})),allowOutsideClick:()=>!Swal.isLoading(),backdrop:!0}).then((async e=>{n.hideProcessing(),e.isConfirmed&&await Swal.fire({icon:"success",title:dokanStripeExpressData.i18n?.cancel_onboarding?.successTitle??"Success",width:600,text:dokanStripeExpressData.i18n?.cancel_onboarding?.successMessage??"Onboarding Cancelled"}).then((async e=>{window.location.reload(!0)}))}))},showProcessing:function(){e("#dokan-stripe-express-payment").block({message:null,overlayCSS:{background:"#fff",opacity:.6}})},hideProcessing:function(){e("#dokan-stripe-express-payment").unblock()},showMessage:function(n,s){let o=e(s?"#dokan-stripe-express-signup-error":"#dokan-stripe-express-signup-message");o.html(n),o.show()},hideMessage:function(){e("#dokan-stripe-express-payment .signup-message").each((function(){e(this).html(""),e(this).hide()}))}};e(document).ready((function(){n.init()}))}(jQuery);
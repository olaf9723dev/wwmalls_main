(()=>{"use strict";function t(t,e,s,o,a,r,n,i){var l,u="function"==typeof t?t.options:t;if(e&&(u.render=e,u.staticRenderFns=s,u._compiled=!0),o&&(u.functional=!0),r&&(u._scopeId="data-v-"+r),n?(l=function(t){(t=t||this.$vnode&&this.$vnode.ssrContext||this.parent&&this.parent.$vnode&&this.parent.$vnode.ssrContext)||"undefined"==typeof __VUE_SSR_CONTEXT__||(t=__VUE_SSR_CONTEXT__),a&&a.call(this,t),t&&t._registeredComponents&&t._registeredComponents.add(n)},u._ssrRegister=l):a&&(l=i?function(){a.call(this,(u.functional?this.parent:this).$root.$options.shadowRoot)}:a),l)if(u.functional){u._injectStyles=l;var d=u.render;u.render=function(t,e){return l.call(e),d(t,e)}}else{var _=u.beforeCreate;u.beforeCreate=_?[].concat(_,l):[l]}return{exports:t,options:u}}const e=t({name:"Tabs",methods:{test(){console.log(this.$route.path)}}},(function(){var t=this,e=t._self._c;return e("h2",{staticClass:"nav-tab-wrapper woo-nav-tab-wrapper"},[e("router-link",{class:["nav-tab",{"nav-tab-active":"/request-for-quote"===t.$route.path}],attrs:{to:{name:"RequestAQuote"}}},[t._v("\n        "+t._s(t.__("Quotes List","dokan"))+"\n    ")]),t._v(" "),e("router-link",{class:["nav-tab",{"nav-tab-active":"/request-for-quote/quote-rules"===t.$route.path}],attrs:{to:{name:"RequestAQuoteRules"}}},[t._v("\n        "+t._s(t.__("Quote Rules","dokan"))+"\n    ")])],1)}),[],!1,null,null,null).exports,s=dokan_get_lib("ListTable"),o="request-for-quote",a=t({name:"RequestAQuote",components:{Tabs:e,ListTable:s},data(){return{requests:[],loading:!1,status:{publish:this.__("Published","dokan"),pending:this.__("Pending","dokan"),approved:this.__("Approved","dokan"),draft:this.__("Draft","dokan"),future:this.__("Scheduled","dokan"),converted:this.__("Converted","dokan"),trash:this.__("Trash","dokan")},counts:{all:0,publish:0,approve:0,draft:0,future:0,pending:0,converted:0,trash:0},notFound:this.__("No quote found.","dokan"),totalPages:1,perPage:10,totalItems:0,showCb:!0,columns:{sl:{label:this.__("Quote #","dokan")},title:{label:this.__("Quote Title","dokan")},customer_email:{label:this.__("Customer Email","dokan")},status:{label:this.__("Quote Status","dokan")},created_at:{label:this.__("Date","dokan")}},actionColumn:"sl",actions:[{key:"edit",label:this.__("Edit","dokan")},{key:"trash",label:this.__("Trash","dokan")},{key:"delete",label:this.__("Delete Permanently","dokan")},{key:"restore",label:this.__("Restore","dokan")}]}},watch:{"$route.query.status"(){this.fetchAll()},"$route.query.page"(){this.fetchAll()}},computed:{currentStatus(){return this.$route.query.status||"all"},currentPage(){let t=this.$route.query.page||1;return parseInt(t)},bulkActions(){return"trash"===this.$route.query.status?[{key:"delete",label:this.__("Delete Permanently","dokan")},{key:"restore",label:this.__("Restore","dokan")}]:[{key:"trash",label:this.__("Move to Trash","dokan")}]},checkLangRtlHelp:()=>1===isRtl&&void 0!==isRtl?"help-block-rtl":"help-block-ltr"},methods:{updatedCounts(t){this.counts.all=parseInt(t.getResponseHeader("X-Status-All")),this.counts.publish=parseInt(t.getResponseHeader("X-Status-Publish")),this.counts.draft=parseInt(t.getResponseHeader("X-Status-Draft")),this.counts.pending=parseInt(t.getResponseHeader("X-Status-Pending")),this.counts.future=parseInt(t.getResponseHeader("X-Status-Future")),this.counts.converted=parseInt(t.getResponseHeader("X-Status-Converted")),this.counts.approve=parseInt(t.getResponseHeader("X-Status-Approved")),this.counts.trash=parseInt(t.getResponseHeader("X-Status-Trash"))},updatePagination(t){this.totalPages=parseInt(t.getResponseHeader("X-WP-TotalPages")),this.totalItems=parseInt(t.getResponseHeader("X-WP-Total"))},fetchAll(){this.loading=!0;const t={per_page:this.perPage,page:this.currentPage,status:this.currentStatus};dokan.api.get("/"+o,t).done(((t,e,s)=>{this.requests=t,this.loading=!1,this.updatedCounts(s),this.updatePagination(s)}))},moment:t=>moment(t),editUrl:t=>dokan.urls.adminRoot+"admin.php?page=dokan#/"+o+"/"+t+"/edit",goToPage(t){this.$router.push({name:"RequestAQuote",query:{status:this.currentStatus,page:t}})},rowAction(t,e){if(e.row.id){if("trash"===t||"delete"===t){this.loading=!0;var s="delete"===t?"?force=true":"";dokan.api.delete("/"+o+"/"+e.row.id+s).done(((t,e,s)=>{this.fetchAll(),this.loading=!1})).error(((t,e,s)=>{this.loadSpinner=!1,alert(t.responseJSON.message)}))}"restore"===t&&(this.loading=!0,dokan.api.put("/"+o+"/"+e.row.id+"/restore").done(((t,e,s)=>{this.fetchAll(),this.loading=!1})).error(((t,e,s)=>{this.loadSpinner=!1,alert(t.responseJSON.message)})))}else alert(this.__("No data found","dokan"))},onBulkAction(t,e){if("trash"===t){this.loading=!0;let t={};t.trash=e,dokan.api.put("/"+o+"/batch",t).done(((t,e,s)=>{this.fetchAll(),this.loading=!1})).error(((t,e,s)=>{this.loadSpinner=!1,alert(t.responseJSON.message)}))}if("delete"===t){this.loading=!0;let t={};t.delete=e,dokan.api.put("/"+o+"/batch",t).done(((t,e,s)=>{this.fetchAll(),this.loading=!1})).error(((t,e,s)=>{this.loadSpinner=!1,alert(t.responseJSON.message)}))}if("restore"===t){this.loading=!0;let t={};t.restore=e,dokan.api.put("/"+o+"/batch",t).done(((t,e,s)=>{this.fetchAll(),this.loading=!1})).error(((t,e,s)=>{this.loadSpinner=!1,alert(t.responseJSON.message)}))}}},created(){this.fetchAll()}},(function(){var t=this,e=t._self._c;return e("div",{staticClass:"dokan-quote-wrapper"},[e("tabs"),t._v(" "),e("br"),t._v(" "),e("h1",{staticClass:"wp-heading-inline"},[t._v(t._s(t.__("Quotes","dokan")))]),t._v(" "),e("router-link",{staticClass:"page-title-action",attrs:{to:{name:"NewRequestQuote"}}},[t._v(t._s(t.__("New Quote","dokan")))]),t._v(" "),e("hr",{staticClass:"wp-header-end"}),t._v(" "),e("ul",{staticClass:"subsubsub"},[e("li",[e("router-link",{attrs:{to:{name:"RequestAQuote"},"active-class":"current",exact:""}},[t._v(t._s(t.__("All","dokan"))+" "),e("span",{staticClass:"count"},[t._v(t._s(t.counts.all))])]),t._v(" | ")],1),t._v(" "),e("li",[e("router-link",{attrs:{to:{name:"RequestAQuote",query:{status:"pending"}},"active-class":"current",exact:""}},[t._v(t._s(t.__("Pending","dokan"))+" "),e("span",{staticClass:"count"},[t._v(t._s(t.counts.pending))])]),t._v(" | ")],1),t._v(" "),e("li",[e("router-link",{attrs:{to:{name:"RequestAQuote",query:{status:"draft"}},"active-class":"current",exact:""}},[t._v(t._s(t.__("Draft","dokan"))+" "),e("span",{staticClass:"count"},[t._v(t._s(t.counts.draft))])]),t._v(" | ")],1),t._v(" "),e("li",[e("router-link",{attrs:{to:{name:"RequestAQuote",query:{status:"converted"}},"active-class":"current",exact:""}},[t._v(t._s(t.__("Converted","dokan"))+" "),e("span",{staticClass:"count"},[t._v(t._s(t.counts.converted))])]),t._v(" | ")],1),t._v(" "),e("li",[e("router-link",{attrs:{to:{name:"RequestAQuote",query:{status:"approve"}},"active-class":"current",exact:""}},[t._v(t._s(t.__("Approved","dokan"))+" "),e("span",{staticClass:"count"},[t._v(t._s(t.counts.approve))])]),t._v(" | ")],1),t._v(" "),e("li",[e("router-link",{attrs:{to:{name:"RequestAQuote",query:{status:"trash"}},"active-class":"current",exact:""}},[t._v(t._s(t.__("Trash","dokan"))+" "),e("span",{staticClass:"count"},[t._v(t._s(t.counts.trash))])])],1)]),t._v(" "),e("list-table",{attrs:{columns:t.columns,rows:t.requests,loading:t.loading,"action-column":t.actionColumn,actions:t.actions,"show-cb":t.showCb,"bulk-actions":t.bulkActions,"not-found":t.notFound,"total-pages":t.totalPages,"total-items":t.totalItems,"per-page":t.perPage,"current-page":t.currentPage,text:t.$root.listTableTexts()},on:{pagination:t.goToPage,"bulk:click":t.onBulkAction},scopedSlots:t._u([{key:"sl",fn:function(s){return["trash"===s.row.status?e("strong",[t._v(t._s(t.__("Quote","dokan")+" "+s.row.id))]):e("strong",[e("a",{attrs:{href:t.editUrl(s.row.id)}},[t._v(t._s(t.__("Quote","dokan")+" "+s.row.id))])])]}},{key:"title",fn:function(s){return[e("strong",[t._v(t._s(s.row.title))])]}},{key:"status",fn:function(s){return[e("span",{class:s.row.status},[t._v(t._s(t.status[s.row.status]))])]}},{key:"created_at",fn:function(e){return[t._v("\n            "+t._s(e.row.created_at)+"\n        ")]}},{key:"row-actions",fn:function(s){return[t._l(t.actions,(function(o,a){return"converted"!==s.row.status?["edit"===o.key?e("span",{class:o.key},[e("a",{attrs:{href:t.editUrl(s.row.id)}},[t._v(t._s(o.label))]),t._v(" "),a!==t.actions.length-1?[t._v(" | ")]:t._e()],2):t._e(),t._v(" "),"trash"===o.key&&"trash"!==t.currentStatus?e("span",{class:o.key},[e("a",{attrs:{href:"#"},on:{click:function(e){return e.preventDefault(),t.rowAction(o.key,s)}}},[t._v(t._s(o.label))])]):t._e(),t._v(" "),"delete"===o.key&&"trash"===t.currentStatus?e("span",{class:o.key},[e("a",{attrs:{href:"#"},on:{click:function(e){return e.preventDefault(),t.rowAction(o.key,s)}}},[t._v(t._s(o.label))]),t._v(" "),a!==t.actions.length-1?[t._v(" | ")]:t._e()],2):t._e(),t._v(" "),"restore"===o.key&&"trash"===t.currentStatus?e("span",{class:o.key},[e("a",{attrs:{href:"#"},on:{click:function(e){return e.preventDefault(),t.rowAction(o.key,s)}}},[t._v(t._s(o.label))]),t._v(" "),a!==t.actions.length-1?[t._v(" | ")]:t._e()],2):t._e()]:t._e()}))]}}])})],1)}),[],!1,null,null,null).exports,r=dokan_get_lib("ListTable"),n="request-for-quote/quote-rule",i=dokan_get_lib("moment"),l=t({name:"RequestAQuoteRules",components:{ListTable:r,Tabs:e},data(){return{requests:[],loading:!1,status:{publish:this.__("Published","dokan"),draft:this.__("Draft","dokan"),trash:this.__("Trash","dokan")},counts:{all:0,publish:0,draft:0,trash:0},notFound:this.__("No quote found.","dokan"),totalPages:1,perPage:10,totalItems:0,showCb:!0,columns:{rule_name:{label:this.__("Title #","dokan")},selected_user_role:{label:this.__("User Roles","dokan")},hide_price:{label:this.__("Hide Price","dokan")},button_text:{label:this.__("Button Text","dokan")},rule_priority:{label:this.__("Rule Priority","dokan")},status:{label:this.__("Rule Status","dokan")},created_at:{label:this.__("Date","dokan")}},actionColumn:"rule_name",actions:[{key:"edit",label:this.__("Edit","dokan")},{key:"trash",label:this.__("Trash","dokan")},{key:"delete",label:this.__("Delete Permanently","dokan")},{key:"restore",label:this.__("Restore","dokan")}]}},watch:{"$route.query.status"(){this.fetchAll()},"$route.query.page"(){this.fetchAll()}},computed:{currentStatus(){return this.$route.query.status||"all"},currentPage(){let t=this.$route.query.page||1;return parseInt(t)},bulkActions(){return"trash"===this.$route.query.status?[{key:"delete",label:this.__("Delete Permanently","dokan")},{key:"restore",label:this.__("Restore","dokan")}]:[{key:"trash",label:this.__("Move to Trash","dokan")}]},checkLangRtlHelp:()=>1===isRtl&&void 0!==isRtl?"help-block-rtl":"help-block-ltr"},methods:{updatedCounts(t){this.counts.all=parseInt(t.getResponseHeader("X-Status-All")),this.counts.publish=parseInt(t.getResponseHeader("X-Status-Publish")),this.counts.draft=parseInt(t.getResponseHeader("X-Status-Draft")),this.counts.trash=parseInt(t.getResponseHeader("X-Status-Trash"))},updatePagination(t){this.totalPages=parseInt(t.getResponseHeader("X-WP-TotalPages")),this.totalItems=parseInt(t.getResponseHeader("X-WP-Total"))},fetchAll(){this.loading=!0;const t={per_page:this.perPage,page:this.currentPage,status:this.currentStatus};dokan.api.get("/"+n,t).done(((t,e,s)=>{this.requests=t,this.loading=!1,this.updatedCounts(s),this.updatePagination(s)}))},moment:t=>i(t),editUrl:t=>dokan.urls.adminRoot+"admin.php?page=dokan#/"+n+"/"+t+"/edit",goToPage(t){this.$router.push({name:"RequestAQuoteRules",query:{status:this.currentStatus,page:t}})},rowAction(t,e){if(e.row.id){if("trash"===t||"delete"===t){this.loading=!0;var s="delete"===t?"?force=true":"";dokan.api.delete("/"+n+"/"+e.row.id+s).done(((t,e,s)=>{this.fetchAll(),this.loading=!1})).error(((t,e,s)=>{this.loadSpinner=!1,alert(t.responseJSON.message)}))}"restore"===t&&(this.loading=!0,dokan.api.put("/"+n+"/"+e.row.id+"/restore").done(((t,e,s)=>{this.fetchAll(),this.loading=!1})).error(((t,e,s)=>{this.loadSpinner=!1,alert(t.responseJSON.message)})))}else alert(this.__("No data found","dokan"))},onBulkAction(t,e){if("trash"===t){this.loading=!0;let t={};t.trash=e,dokan.api.put("/"+n+"/batch",t).done(((t,e,s)=>{this.fetchAll(),this.loading=!1})).error(((t,e,s)=>{this.loadSpinner=!1,alert(t.responseJSON.message)}))}if("delete"===t){this.loading=!0;let t={};t.delete=e,dokan.api.put("/"+n+"/batch",t).done(((t,e,s)=>{this.fetchAll(),this.loading=!1})).error(((t,e,s)=>{this.loadSpinner=!1,alert(t.responseJSON.message)}))}if("restore"===t){this.loading=!0;let t={};t.restore=e,dokan.api.put("/"+n+"/batch",t).done(((t,e,s)=>{this.fetchAll(),this.loading=!1})).error(((t,e,s)=>{this.loadSpinner=!1,alert(t.responseJSON.message)}))}}},created(){this.fetchAll()}},(function(){var t=this,e=t._self._c;return e("div",{staticClass:"dokan-announcement-wrapper"},[e("tabs"),t._v(" "),e("br"),t._v(" "),e("h1",{staticClass:"wp-heading-inline"},[t._v(t._s(t.__("Quote Rules","dokan")))]),t._v(" "),e("router-link",{staticClass:"page-title-action",attrs:{to:{name:"NewQuoteRules"}}},[t._v(t._s(t.__("New Quote Rules","dokan")))]),t._v(" "),e("hr",{staticClass:"wp-header-end"}),t._v(" "),e("ul",{staticClass:"subsubsub"},[e("li",[e("router-link",{attrs:{to:{name:"RequestAQuoteRules"},"active-class":"current",exact:""}},[t._v(t._s(t.__("All","dokan"))+" "),e("span",{staticClass:"count"},[t._v(t._s(t.counts.all))])]),t._v(" | ")],1),t._v(" "),e("li",[e("router-link",{attrs:{to:{name:"RequestAQuoteRules",query:{status:"publish"}},"active-class":"current",exact:""}},[t._v(t._s(t.__("Published","dokan"))+" "),e("span",{staticClass:"count"},[t._v(t._s(t.counts.publish))])]),t._v(" | ")],1),t._v(" "),e("li",[e("router-link",{attrs:{to:{name:"RequestAQuoteRules",query:{status:"draft"}},"active-class":"current",exact:""}},[t._v(t._s(t.__("Draft","dokan"))+" "),e("span",{staticClass:"count"},[t._v(t._s(t.counts.draft))])]),t._v(" | ")],1),t._v(" "),e("li",[e("router-link",{attrs:{to:{name:"RequestAQuoteRules",query:{status:"trash"}},"active-class":"current",exact:""}},[t._v(t._s(t.__("Trash","dokan"))+" "),e("span",{staticClass:"count"},[t._v(t._s(t.counts.trash))])])],1)]),t._v(" "),e("list-table",{attrs:{columns:t.columns,rows:t.requests,loading:t.loading,"action-column":t.actionColumn,actions:t.actions,"show-cb":t.showCb,"bulk-actions":t.bulkActions,"not-found":t.notFound,"total-pages":t.totalPages,"total-items":t.totalItems,"per-page":t.perPage,"current-page":t.currentPage,text:t.$root.listTableTexts()},on:{pagination:t.goToPage,"bulk:click":t.onBulkAction},scopedSlots:t._u([{key:"rule_name",fn:function(s){return["trash"===s.row.status?e("strong",[t._v(t._s(s.row.rule_name))]):e("strong",[e("a",{attrs:{href:t.editUrl(s.row.id)}},[t._v(t._s(s.row.rule_name))])])]}},{key:"status",fn:function(s){return[e("span",{class:s.row.status},[t._v(t._s(t.status[s.row.status]))])]}},{key:"created_at",fn:function(e){return[t._v("\n            "+t._s(e.row.created_at)+"\n        ")]}},{key:"row-actions",fn:function(s){return[t._l(t.actions,(function(o,a){return["edit"===o.key?e("span",{class:o.key},[e("a",{attrs:{href:t.editUrl(s.row.id)}},[t._v(t._s(o.label))]),t._v(" "),a!==t.actions.length-1?[t._v(" | ")]:t._e()],2):t._e(),t._v(" "),"trash"===o.key&&"trash"!==t.currentStatus?e("span",{class:o.key},[e("a",{attrs:{href:"#"},on:{click:function(e){return e.preventDefault(),t.rowAction(o.key,s)}}},[t._v(t._s(o.label))])]):t._e(),t._v(" "),"delete"===o.key&&"trash"===t.currentStatus?e("span",{class:o.key},[e("a",{attrs:{href:"#"},on:{click:function(e){return e.preventDefault(),t.rowAction(o.key,s)}}},[t._v(t._s(o.label))]),t._v(" "),a!==t.actions.length-1?[t._v(" | ")]:t._e()],2):t._e(),t._v(" "),"restore"===o.key&&"trash"===t.currentStatus?e("span",{class:o.key},[e("a",{attrs:{href:"#"},on:{click:function(e){return e.preventDefault(),t.rowAction(o.key,s)}}},[t._v(t._s(o.label))]),t._v(" "),a!==t.actions.length-1?[t._v(" | ")]:t._e()],2):t._e()]}))]}}])})],1)}),[],!1,null,null,null).exports,u=dokan_get_lib("TextEditor"),d=dokan_get_lib("Modal"),c=dokan_get_lib("Postbox"),p=dokan_get_lib("Multiselect"),h=dokan_get_lib("debounce"),f="request-for-quote",v=Swal.mixin({customClass:{confirmButton:"button button-primary",cancelButton:"button button-secondary"},buttonsStyling:!1}),m={PENDING:"pending",APPROVED:"approve",CONVERTED:"converted"},g=t({name:"NewRequestQuote",components:{Tabs:e,Postbox:c,TextEditor:u,Modal:d,Multiselect:p,Debounce:h},data(){return{QUOTE_STATUS:m,quoteId:"",loading:!1,showModal:!1,createStatus:m.PENDING,showProductTable:!1,requested_table_products:[],responcedProduct:[],requested_products:[],customers:[],pageTitle:this.__("Add New Quote","dokan"),quote:{quote_title:"",status:m.PENDING,customer_info:{name_field:"",email_field:"",company_field:"",phone_field:""},user_id:"",product_ids:[],offer_price:[],offer_product_quantity:[]},product_quantity:1,product_id:"",columns:{thumbnail:{label:this.__("Thumbnail","dokan")},item:{label:this.__("Item","dokan")},cost:{label:this.__("Cost","dokan")},off_price:{label:this.__("Off. Price","dokan")},qty:{label:this.__("Qty","dokan")},off_subtotal:{label:this.__("Off. Subtotal","dokan")}},loadSpinner:!1,errorMessage:[],productErrorMessage:[],isLoading:!1,draftBtnLabel:this.__("Save as Draft","dokan"),publishBtnLabel:this.__("Publish","dokan"),addProductBtnLabel:this.__("Add product(s)","dokan"),approveOrderBtnLabel:this.__("Approve Quote","dokan"),addOrderBtnLabel:this.__("Convert to Order","dokan"),addProductToQuoteBtnLabel:this.__("Add to quote","dokan")}},computed:{total:function(){let t=0;return this.quote.offer_price.forEach(((e,s)=>{0<e&&(t+=parseFloat(e)*parseFloat(this.quote.offer_product_quantity[s]))})),t},submitBtnLabel(){return this.statusesLabel[this.quote.status]},checkRtl:()=>1===isRtl&&void 0!==isRtl?"lang_rtl":"",checkLangRtlHelp:()=>1===isRtl&&void 0!==isRtl?"help-block-rtl":"help-block-ltr"},methods:{formatMoney:t=>accounting.formatMoney(t,dokan.currency),hideModal(){this.showModal=!1},openModal(){this.product_id="",this.product_quantity=1,this.showModal=!0},searchProducts:h((function(t=""){let e=this;t.length<1||(this.isLoading=!0,dokan.api.get("/products",{search:t,request_a_quote:1}).done((t=>{e.responcedProduct=t,e.requested_products=t.map((function(t){return{product_id:t.id,product_title:t.name}}))})).always((()=>{e.isLoading=!1})).fail((t=>{e.requested_products=[{product_id:0,product_title:e.__("No product found","dokan")}];let s=dokan_handle_ajax_error(t);s&&e.showAlert(s,"","error")})))}),300),addProductToQuote(){let t=this.product_id.product_id,e=this.product_quantity,s=[...this.requested_table_products],o=[...this.quote.product_ids],a=[...this.quote.offer_price],r=[...this.quote.offer_product_quantity];_.map(this.responcedProduct,(function(n,i){if(n.id===t&&n.price>=1&&e>=1)return o.push(n.id),a.push(n.price),r.push(e),s.push(n)})),this.requested_table_products=s,this.quote.product_ids=o,this.quote.offer_price=a,this.quote.offer_product_quantity=r,this.showProductTable=!0,this.hideModal()},removeFromQuote(t){this.requested_table_products.splice(t,1),this.quote.product_ids.splice(t,1),this.quote.offer_price.splice(t,1),this.quote.offer_product_quantity.splice(t,1),this.requested_table_products.length<=0&&(this.showProductTable=!1,this.quote.offer_price=[],this.quote.offer_product_quantity=[])},asyncCustomerFind:h((function(t=""){this.isLoading=!0,t.length<1||dokan.api.get("/request-for-quote/customers",{search:t}).done((t=>{this.isLoading=!1;let e=this.quote.customer_info;this.customers=_.map(t,(function(t){return e={name_field:t.username,email_field:t.email},{id:t.id,name:t.username+"( "+t.email+" )"}})),this.quote.customer_info=e}))}),300),filterUndefined:t=>t.filter((t=>void 0!==t)),clearAll(){this.quote.user_id=""},createRequestAQuote(t){this.$route.params.id?this.updateRequestAQuote(t):this.saveQuoteRequest(t)},saveQuoteRequest(t){this.loadSpinner=!0;let e=jQuery.extend({},this.quote);if(e.offer_price=this.filterUndefined([...e.offer_price]),e.offer_product_quantity=this.filterUndefined([...e.offer_product_quantity]),e.user_id=this.quote.user_id.id,e.status=t,!this.validateFormFields(e))return this.loadSpinner=!1,!1;dokan.api.post("/"+f,e).done((t=>{this.loadSpinner=!1,this.sendToPages()})).error((t=>{this.loadSpinner=!1,alert(t.responseJSON.message)}))},updateRequestAQuote(t){let e=this.$route.params.id;this.loadSpinner=!0;let s=jQuery.extend({},this.quote);if(s.product_ids=this.filterUndefined([...s.product_ids]),s.offer_price=this.filterUndefined([...s.offer_price]),s.offer_product_quantity=this.filterUndefined([...s.offer_product_quantity]),Array.isArray(this.quote.user_id)?s.user_id=this.quote.user_id[0].id:s.user_id=this.quote.user_id.id,s.status=t,s.id=e,!this.validateFormFields(s))return this.loadSpinner=!1,!1;dokan.api.put("/"+f+"/"+e,s).done((t=>{this.loadSpinner=!1,this.sendToPages()})).error((t=>{this.loadSpinner=!1,alert(t.responseJSON.message)}))},validateFormFields(t){let e=!0;if(this.errorMessage=[],this.productErrorMessage=[],""===t.quote_title&&(this.errorMessage.push(this.__("Quote Title is required.","dokan")),e=!1),""!==t.user_id&&void 0!==t.user_id||(this.errorMessage.push(this.__("Customer is required.","dokan")),e=!1),t.product_ids.length<=0)this.productErrorMessage.push(this.__("Please select at least one product.","dokan")),e=!1;else for(let s=0;s<t.product_ids.length;s++)""!==t.product_ids[s]&&void 0!==t.product_ids[s]||(this.productErrorMessage.push(this.__("Please select at least one product.","dokan")),e=!1);if(t.offer_price.length<=0)this.productErrorMessage.push(this.__("Please select at least one price.","dokan")),e=!1;else for(let s=0;s<t.offer_price.length;s++)""!==t.offer_price[s]&&0!=t.offer_price[s]||(this.productErrorMessage.push(this.__("Offer price can't be zero.","dokan")),e=!1);if(t.offer_product_quantity.length<=0)this.productErrorMessage.push(this.__("Please add at least one offer product quantity.","dokan")),e=!1;else for(let s=0;s<t.offer_product_quantity.length;s++)""!==t.offer_product_quantity[s]&&0!=t.offer_product_quantity[s]||(this.productErrorMessage.push(this.__("Offer product quantity can't be zero.","dokan")),e=!1);return e},validatePhoneInput(t){this.quote.customer_info.phone_field=this.quote.customer_info.phone_field.replace(/[^0-9\\.\-\_\(\)\+]+/g,"")},sendToPages(){this.$router.push({name:"RequestAQuote"})},fetchAQuote(t){this.loading=!0,dokan.api.get("/"+f+"/"+t).done((t=>{this.quote.quote_title=t.title,this.quote.status=t.status,0!=t.customer_info&&(this.quote.customer_info=t.customer_info?t.customer_info:{},this.customers=[{id:t.customer.user_id,name:t.customer.user_login+"( "+t.customer.user_email+" )"}],this.quote.user_id=this.customers),this.requested_table_products=t.products;let e=[],s=[],o=[];_.map(t.products,(function(t,a){e.push(t.id),s[a]=t.offer_price,o[a]=t.offer_product_quantity})),this.pageTitle=this.__("Edit Quote","dokan"),this.quote.product_ids=e,this.quote.offer_price=s,this.quote.offer_product_quantity=o,this.loading=!1,this.showProductTable=!0}))},updateQuote(t,e){dokan.api.post("/"+f+"/convert-to-order",{quote_id:t,status:e}).done((t=>{this.loadSpinner=!1,this.sendToPages()})).fail((t=>{this.loadSpinner=!1,alert(t.responseJSON.message)}))},showAlert(t,e,s){v.fire(t,e,s)}},created(){this.$route.params.id&&(this.quoteId=this.$route.params.id,this.fetchAQuote(this.$route.params.id))}},(function(){var t=this,e=t._self._c;return e("div",{staticClass:"dokan-announcement-form-wrapper"},[e("tabs"),t._v(" "),e("h1",{staticClass:"wp-heading-inline"},[t._v(t._s(t.pageTitle))]),t._v(" "),e("a",{staticClass:"page-title-action",on:{click:function(e){return t.$router.go(-1)}}},[t._v(t._s(t.__("Go Back","dokan")))]),t._v(" "),e("hr",{staticClass:"wp-header-end"}),t._v(" "),e("form",{attrs:{action:"",method:"post",id:"post"}},[e("div",{attrs:{id:"poststuff"}},[e("div",{staticClass:"metabox-holder columns-2",attrs:{id:"post-body"}},[e("div",{staticClass:"post-body-content",class:t.checkRtl},[e("div",{attrs:{id:"titlediv"}},[e("div",{attrs:{id:"titlewrap"}},[e("input",{directives:[{name:"model",rawName:"v-model",value:t.quote.quote_title,expression:"quote.quote_title"}],attrs:{type:"text",name:"post_title",size:"30",id:"title",autocomplete:"off",placeholder:t.__("Enter quote title","dokan"),required:"required"},domProps:{value:t.quote.quote_title},on:{input:function(e){e.target.composing||t.$set(t.quote,"quote_title",e.target.value)}}})]),t._v(" "),e("div",{staticClass:"inside"})]),t._v(" "),e("div",{staticClass:"postarea wp-editor-expand",attrs:{id:"postdivrich"}},[e("postbox",{attrs:{title:t.__("Customer Information","dokan"),extraClass:"request-quote-settings"}},[t._l(t.errorMessage,(function(s){return t.errorMessage.length>0?e("ul",{staticClass:"error-message"},[e("li",[t._v(t._s(s))])]):t._e()})),t._v(" "),e("table",{staticClass:"form-table announcement-meta-options"},[e("tbody",[e("tr",[e("th",[t._v(t._s(t.__("Quote user","dokan")))]),t._v(" "),e("td",[e("multiselect",{attrs:{autocomplete:"off",id:"ajax",label:"name","track-by":"id",placeholder:t.__("Type to search","dokan"),"open-direction":"bottom",options:t.customers,"clear-on-select":!0,"close-on-select":!0,searchable:!0,"hide-selected":!0},on:{"search-change":t.asyncCustomerFind},model:{value:t.quote.user_id,callback:function(e){t.$set(t.quote,"user_id",e)},expression:"quote.user_id"}})],1)]),t._v(" "),e("tr",[e("th",[t._v("\n                                        "+t._s(t.__("Full Name","dokan"))+"\n                                    ")]),t._v(" "),e("td",[e("input",{directives:[{name:"model",rawName:"v-model",value:t.quote.customer_info.name_field,expression:"quote.customer_info.name_field"}],staticStyle:{"border-left":"2px solid rgb(202, 16, 16)"},attrs:{type:"text",size:"50",placeholder:t.__("Full Name","dokan"),name:"name_field",required:"required"},domProps:{value:t.quote.customer_info.name_field},on:{input:function(e){e.target.composing||t.$set(t.quote.customer_info,"name_field",e.target.value)}}})])]),t._v(" "),e("tr",[e("th",[t._v("\n                                        "+t._s(t.__("Email","dokan"))+"\n                                    ")]),t._v(" "),e("td",[e("input",{directives:[{name:"model",rawName:"v-model",value:t.quote.customer_info.email_field,expression:"quote.customer_info.email_field"}],staticStyle:{"border-left":"2px solid rgb(202, 16, 16)"},attrs:{type:"email",size:"50",placeholder:t.__("Email","dokan"),name:"email_field",required:"required"},domProps:{value:t.quote.customer_info.email_field},on:{input:function(e){e.target.composing||t.$set(t.quote.customer_info,"email_field",e.target.value)}}})])]),t._v(" "),e("tr",[e("th",[t._v("\n                                        "+t._s(t.__("Company Name","dokan"))+"\n                                    ")]),t._v(" "),e("td",[e("input",{directives:[{name:"model",rawName:"v-model",value:t.quote.customer_info.company_field,expression:"quote.customer_info.company_field"}],attrs:{type:"text",size:"50",placeholder:t.__("Company Name","dokan"),name:"company_field"},domProps:{value:t.quote.customer_info.company_field},on:{input:function(e){e.target.composing||t.$set(t.quote.customer_info,"company_field",e.target.value)}}})])]),t._v(" "),e("tr",[e("th",[t._v("\n                                        "+t._s(t.__("Phone Number","dokan"))+"\n                                    ")]),t._v(" "),e("td",[e("input",{directives:[{name:"model",rawName:"v-model",value:t.quote.customer_info.phone_field,expression:"quote.customer_info.phone_field"}],attrs:{type:"text",size:"50",placeholder:t.__("Phone Number","dokan"),name:"phone_field"},domProps:{value:t.quote.customer_info.phone_field},on:{input:[function(e){e.target.composing||t.$set(t.quote.customer_info,"phone_field",e.target.value)},function(e){return e.preventDefault(),t.validatePhoneInput.apply(null,arguments)}]}})])])])])],2)],1)]),t._v(" "),e("div",{staticClass:"postbox-container",attrs:{id:"postbox-container-1"}},[e("postbox",{attrs:{title:t.__("Publish","dokan"),extraClass:"announcement-actions"}},[t.quote.status!==t.QUOTE_STATUS.CONVERTED?e("div",[e("div",{staticClass:"action"},[e("input",{staticClass:"button button-default draft-btn",attrs:{type:"submit",disabled:t.loadSpinner},domProps:{value:t.draftBtnLabel},on:{click:function(e){return e.preventDefault(),t.createRequestAQuote("draft")}}}),t._v(" "),t.loadSpinner?e("span",{staticClass:"spinner"}):t._e(),t._v(" "),e("input",{staticClass:"button button-primary publish-btn",attrs:{type:"submit",disabled:t.loadSpinner},domProps:{value:t.publishBtnLabel},on:{click:function(e){return e.preventDefault(),t.createRequestAQuote(t.createStatus)}}}),t._v(" "),e("div",{staticClass:"clear"})])]):t._e(),t._v(" "),t.quote.status===t.QUOTE_STATUS.CONVERTED?e("h2",[t._v(t._s(t.__("This quote is already converted into order.","dokan")))]):t._e()])],1),t._v(" "),e("div",{staticClass:"postbox-container",attrs:{id:"postbox-container-2"}},[e("postbox",{attrs:{title:t.__("Quote Details","dokan"),extraClass:"request-quote-settings"}},[t.productErrorMessage.length>0?e("div",t._l(t.productErrorMessage,(function(s){return e("ul",{staticClass:"error-message"},[e("li",[t._v(t._s(s))])])})),0):t._e(),t._v(" "),t.showProductTable?e("table",{staticClass:"form-table dokan-quote-product"},[e("thead",[e("tr",[t._l(t.columns,(function(s){return e("th",[t._v(t._s(s.label))])})),t._v(" "),e("th")],2)]),t._v(" "),e("tbody",t._l(t.requested_table_products,(function(s,o){return e("tr",[e("td",[e("img",{staticClass:"attachment-thumbnail size-thumbnail",attrs:{width:"50",src:s.images[0].src,alt:s.name,loading:"lazy",title:s.name}})]),t._v(" "),e("td",[e("div",[e("a",{attrs:{href:s.permalink,target:"_blank"}},[t._v(t._s(s.name)+" ")])]),t._v(" "),e("div",[t._v("\n                                        "+t._s(t.__("Vendor: ","dokan"))+"\n                                    ")]),t._v(" "),e("div",[t._v("\n                                        "+t._s(s.store.name)+"\n                                    ")])]),t._v(" "),e("td",[t._v("\n                                    "+t._s(t.formatMoney(s.price))+"\n                                ")]),t._v(" "),e("td",[e("input",{directives:[{name:"model",rawName:"v-model",value:t.quote.offer_price[o],expression:"quote.offer_price[index]"}],staticStyle:{width:"5em",float:"right","min-height":"40px","margin-right":"30px"},attrs:{type:"text",name:"offer_price",id:"offer_price",autocomplete:"off"},domProps:{value:t.quote.offer_price[o]},on:{input:function(e){e.target.composing||t.$set(t.quote.offer_price,o,e.target.value)}}})]),t._v(" "),e("td",[e("input",{directives:[{name:"model",rawName:"v-model",value:t.quote.offer_product_quantity[o],expression:"quote.offer_product_quantity[index]"}],staticStyle:{width:"5em",float:"right","min-height":"40px","margin-right":"30px"},attrs:{type:"number",name:"offer_product_quantity",min:"1",id:"offer_product_quantity",autocomplete:"off"},domProps:{value:t.quote.offer_product_quantity[o]},on:{input:function(e){e.target.composing||t.$set(t.quote.offer_product_quantity,o,e.target.value)}}})]),t._v(" "),e("td",[t._v("\n                                    "+t._s(t.formatMoney(t.quote.offer_price[o]*t.quote.offer_product_quantity[o]))+"\n                                ")]),t._v(" "),e("td",[e("a",{on:{click:function(e){return t.removeFromQuote(o)}}},[e("span",{staticClass:"dashicons dashicons-no",staticStyle:{color:"red",cursor:"pointer"}})])])])})),0),t._v(" "),e("tfoot",[e("tr",[e("td",{staticStyle:{"text-align":"right"},attrs:{colspan:"5"}},[t._v("\n                                    "+t._s(t.__("Subtotal (Standard)","dokan"))+"\n                                ")]),t._v(" "),e("td",{staticStyle:{"text-align":"left"},attrs:{colspan:"2"}},[t._v("\n                                    "+t._s(t.formatMoney(t.total))+"\n                                ")])])])]):t._e(),t._v(" "),e("footer",[t.quote.status!==t.QUOTE_STATUS.CONVERTED?e("input",{staticClass:"button button-default draft-btn",attrs:{type:"button",value:t.addProductBtnLabel,disabled:t.loadSpinner},on:{click:function(e){return e.preventDefault(),t.openModal()}}}):t._e(),t._v(" "),t.quote.status===t.QUOTE_STATUS.PENDING&&""!==t.quoteId?e("input",{staticClass:"button button-primary publish-btn",staticStyle:{float:"right"},attrs:{type:"button",value:t.approveOrderBtnLabel,disabled:t.loadSpinner},on:{click:function(e){return e.preventDefault(),t.updateQuote(t.quoteId,t.QUOTE_STATUS.APPROVED)}}}):t._e(),t._v(" "),t.quote.status===t.QUOTE_STATUS.APPROVED&&""!==t.quoteId?e("input",{staticClass:"button button-primary publish-btn",staticStyle:{float:"right"},attrs:{type:"button",value:t.addOrderBtnLabel,disabled:t.loadSpinner},on:{click:function(e){return e.preventDefault(),t.updateQuote(t.quoteId,t.QUOTE_STATUS.CONVERTED)}}}):t._e()])])],1)]),t._v(" "),e("br",{staticClass:"clear"})])]),t._v(" "),t.showModal?e("modal",{attrs:{title:t.__("Add Product(s)","dokan"),footer:!0},on:{close:t.hideModal}},[e("template",{slot:"body"},[e("multiselect",{staticStyle:{width:"75%",float:"left"},attrs:{autocomplete:"off",id:"ajax",label:"product_title","track-by":"id",placeholder:t.__("Type to search","dokan"),"open-direction":"bottom",options:t.requested_products,"clear-on-select":!0,"close-on-select":!0,searchable:!0,"hide-selected":!0},on:{"search-change":t.searchProducts},model:{value:t.product_id,callback:function(e){t.product_id=e},expression:"product_id"}}),t._v(" "),e("input",{directives:[{name:"model",rawName:"v-model",value:t.product_quantity,expression:"product_quantity"}],staticStyle:{width:"5em",float:"right","min-height":"40px","margin-right":"30px"},attrs:{type:"number",name:"quantity",size:"10",min:"1",id:"quantity",autocomplete:"off"},domProps:{value:t.product_quantity},on:{input:function(e){e.target.composing||(t.product_quantity=e.target.value)}}})],1),t._v(" "),e("template",{slot:"footer"},[e("input",{staticClass:"button button-primary publish-btn",attrs:{type:"button",value:t.addProductToQuoteBtnLabel,disabled:t.loadSpinner},on:{click:function(e){return e.preventDefault(),t.addProductToQuote()}}})])],2):t._e()],1)}),[],!1,null,null,null).exports,k=t({props:["id","label","nodes","depth","hasChildren","savedCategories"],data(){return{showChildren:!!this.$route.params.id}},name:"categoryList",computed:{indent(){return{transform:`translate(${15*this.depth}px)`}}},methods:{toggleChildren(){this.showChildren=!this.showChildren},checkCategory(t){this.$emit("clickedCategory",t)}}},(function(){var t=this,e=t._self._c;return e("ul",{staticClass:"categoryList"},[e("li",{staticClass:"subCategory",style:t.indent},[e("input",{staticClass:"parent",attrs:{type:"checkbox"},domProps:{checked:t.savedCategories.includes(t.id)},on:{click:function(e){return t.checkCategory(t.id)}}}),t._v(" "),e("span",{on:{click:t.toggleChildren}},[t._v("\n            "+t._s(t.label)+" "),t.hasChildren?e("span",[t._v("["+t._s(t.showChildren?"-":"+")+"]")]):t._e()])]),t._v(" "),t._l(t.nodes,(function(s,o){return t.showChildren?e("categoryList",{key:s.id,attrs:{nodes:s.children,label:s.name,id:s.id,savedCategories:t.savedCategories,hasChildren:s.hasChildren,depth:t.depth+1},on:{clickedCategory:t.checkCategory}}):t._e()}))],2)}),[],!1,null,null,null).exports,b=dokan_get_lib("Postbox"),y=dokan_get_lib("Multiselect"),q=dokan_get_lib("debounce"),C="request-for-quote/quote-rule",w=Swal.mixin({customClass:{confirmButton:"button button-primary",cancelButton:"button button-secondary"},buttonsStyling:!1}),x=t({name:"NewQuoteRules",components:{Tabs:e,categoryList:k,Postbox:b,Multiselect:y,Debounce:q},data(){return{loading:!1,showProductsDropdown:!0,createStatus:"publish",isOpen:"",allRoles:[],requested_products:[],requestedCategories:[],rule:{rule_name:"",product_ids:[],category_ids:[],hide_price:1,hide_price_text:this.__("Price is hidden","dokan"),button_text:this.__("Add to quote","dokan"),rule_priority:0,hide_cart_button:"replace",rule_contents:[],selected_user_role:[],apply_on_all_product:0},pageTitle:this.__("Add New Rules","dokan"),loadSpinner:!1,draftBtnLabel:this.__("Save as Draft","dokan"),publishBtnLabel:this.__("Publish","dokan"),ruleErrorMessage:[]}},computed:{checkRtl:()=>1===isRtl&&void 0!==isRtl?"lang_rtl":""},methods:{toggle:function(t){this.isOpen=this.isOpen!==t?t:""},checkedItem:(t,e)=>e.includes(t),fetchRoles(){this.loading=!0,dokan.api.get("/request-for-quote/roles").done((t=>{this.allRoles=t.role_names,this.allRoles.dokan_wholesale_customer="Wholesale customer",this.allRoles.guest="Guest",this.loading=!1}))},limitText(t){return this.__(`and ${t} other products`,"dokan")},searchProducts:q((function(t=""){let e=this;t.length<1||dokan.api.get("/products",{search:t,request_a_quote:1}).done((t=>{this.requested_products=t.map((function(t){return{id:t.id,name:t.name}}))})).fail((t=>{e.filter.stores=[{id:0,name:e.__("No product found","dokan")}];let s=dokan_handle_ajax_error(t);s&&e.showAlert(s,"","error")}))}),300),searchCategory(){dokan.api.get("/products/multistep-categories").done((t=>{let e=this;Object.values(t).forEach((function(s){if(0!=s.parent_id)return;let o={id:Number(s.term_id),name:s.name,hasChildren:!1};s.children.length>0&&(o.hasChildren=!0,o.children=e.getChildCategories(t,s.children)),e.requestedCategories.push(o)}))}))},getChildCategories(t,e){let s=[],o=this;return e.forEach((function(e){let a={id:Number(t[e].term_id),name:t[e].name,hasChildren:!1};t[e].children.length>0&&(a.hasChildren=!0,a.children=o.getChildCategories(t,t[e].children)),s.push(a)})),s},createQuoteRules(t){this.$route.params.id?this.updateQuoteRule(t,this.$route.params.id):this.saveQuoteRules(t)},getFilteredJsonData(t){let e=jQuery.extend({},this.rule);return e.status=t,e.product_ids=!e.apply_on_all_product&&Array.isArray(e.product_ids)?e.product_ids.map((t=>t.id)):[],e.category_ids=!e.apply_on_all_product&&Array.isArray(e.category_ids)?e.category_ids.map((t=>t)):[],e},validateFormFields(t){let e=!0;return this.ruleErrorMessage=[],""!==t.rule_name&&void 0!==t.rule_name||(this.ruleErrorMessage.push(this.__("Please enter rule name.","dokan")),e=!1),t.selected_user_role.length<=0&&(this.ruleErrorMessage.push(this.__("Please select at least one user role.","dokan")),e=!1),""!==t.hide_price_text&&void 0!==t.hide_price_text||(this.ruleErrorMessage.push(this.__("Please enter hide price text.","dokan")),e=!1),""!==t.button_text&&void 0!==t.button_text||(this.ruleErrorMessage.push(this.__("Please enter button text.","dokan")),e=!1),e},saveQuoteRules(t){this.loadSpinner=!0;let e=this.getFilteredJsonData(t);if(!this.validateFormFields(e))return this.loadSpinner=!1,!1;dokan.api.post("/"+C,e).done((t=>{this.loadSpinner=!1,this.sendToPages()})).fail((t=>{this.loadSpinner=!1;let e=dokan_handle_ajax_error(t);e&&self.showAlert(e,"","error")}))},updateQuoteRule(t,e){this.loadSpinner=!0;let s=this.getFilteredJsonData(t);if(s.id=e,!this.validateFormFields(s))return this.loadSpinner=!1,!1;dokan.api.put("/"+C+"/"+e,s).done((t=>{this.loadSpinner=!1,this.sendToPages()})).fail((t=>{this.loadSpinner=!1;let e=dokan_handle_ajax_error(t);e&&self.showAlert(e,"","error")}))},sendToPages(){this.$router.push({name:"RequestAQuoteRules"})},checkCategory(t){var e=this.rule.category_ids.indexOf(t);e>=0?this.rule.category_ids.splice(e,1):(this.rule.category_ids.push(t),Array.isArray(t)&&(this.rule.category_ids=t))},fetchAQuoteRule(t){this.loading=!0,dokan.api.get("/"+C+"/"+t).done((t=>{this.rule=t,this.rule.apply_on_all_product=parseInt(t.apply_on_all_product),this.rule.apply_on_all_product&&(this.showProductsDropdown=!1),this.pageTitle=this.__("Edit Rule","dokan"),this.loading=!1})).fail((t=>{this.loadSpinner=!1;let e=dokan_handle_ajax_error(t);e&&self.showAlert(e,"","error")}))},showAlert(t,e,s){w.fire(t,e,s)}},created(){this.$route.params.id&&this.fetchAQuoteRule(this.$route.params.id),this.fetchRoles(),this.searchCategory()}},(function(){var t=this,e=t._self._c;return e("div",{staticClass:"dokan-quote-form-wrapper"},[e("tabs"),t._v(" "),e("h1",{staticClass:"wp-heading-inline"},[t._v(t._s(t.pageTitle))]),t._v(" "),e("a",{staticClass:"page-title-action",on:{click:function(e){return t.$router.go(-1)}}},[t._v(t._s(t.__("Go Back","dokan")))]),t._v(" "),e("hr",{staticClass:"wp-header-end"}),t._v(" "),e("form",{attrs:{action:"",method:"post",id:"post"}},[e("div",{attrs:{id:"poststuff"}},[e("div",{staticClass:"metabox-holder columns-2",attrs:{id:"post-body"}},[e("div",{staticClass:"post-body-content",class:t.checkRtl},[e("div",{attrs:{id:"titlediv"}},[e("div",{attrs:{id:"titlewrap"}},[e("input",{directives:[{name:"model",rawName:"v-model",value:t.rule.rule_name,expression:"rule.rule_name"}],attrs:{type:"text",name:"rule_name",size:"30",id:"title",autocomplete:"off",placeholder:t.__("Enter rule title","dokan"),required:"required"},domProps:{value:t.rule.rule_name},on:{input:function(e){e.target.composing||t.$set(t.rule,"rule_name",e.target.value)}}})]),t._v(" "),e("div",{staticClass:"inside"})]),t._v(" "),e("div",{staticClass:"postarea wp-editor-expand",attrs:{id:"postdivrich"}},[e("postbox",{attrs:{title:t.__("Rule settings","dokan"),extraClass:"request-rule-settings"}},[t.ruleErrorMessage.length>0?e("div",t._l(t.ruleErrorMessage,(function(s,o){return e("ul",{key:o,staticClass:"error-message"},[e("li",[t._v(t._s(s))])])})),0):t._e(),t._v(" "),e("table",{staticClass:"form-table"},[e("tr",[e("th",{staticClass:"cat_text"},[e("label",[e("strong",[t._v(t._s(t.__("Apply quote for","dokan")))])])]),t._v(" "),e("td",[e("ul",{staticClass:"all_cats"},t._l(t.allRoles,(function(s,o){return e("li",{key:o,staticClass:"per_cat"},[e("input",{directives:[{name:"model",rawName:"v-model",value:t.rule.selected_user_role,expression:"rule.selected_user_role"}],staticClass:"parent",attrs:{id:o,type:"checkbox"},domProps:{value:o,checked:Array.isArray(t.rule.selected_user_role)?t._i(t.rule.selected_user_role,o)>-1:t.rule.selected_user_role},on:{change:function(e){var s=t.rule.selected_user_role,a=e.target,r=!!a.checked;if(Array.isArray(s)){var n=o,i=t._i(s,n);a.checked?i<0&&t.$set(t.rule,"selected_user_role",s.concat([n])):i>-1&&t.$set(t.rule,"selected_user_role",s.slice(0,i).concat(s.slice(i+1)))}else t.$set(t.rule,"selected_user_role",r)}}}),t._v(" "),e("label",{attrs:{for:o}},[t._v(t._s(s))])])})),0)])]),t._v(" "),e("tr",[e("th",[t._v(t._s(t.__("Apply on All Products","dokan")))]),t._v(" "),e("td",[e("input",{directives:[{name:"model",rawName:"v-model",value:t.rule.apply_on_all_product,expression:"rule.apply_on_all_product"}],staticClass:"parent",attrs:{type:"checkbox",id:"apply_on_all_product",name:"apply_on_all_product"},domProps:{checked:Array.isArray(t.rule.apply_on_all_product)?t._i(t.rule.apply_on_all_product,null)>-1:t.rule.apply_on_all_product},on:{click:function(e){t.showProductsDropdown=!t.showProductsDropdown},change:function(e){var s=t.rule.apply_on_all_product,o=e.target,a=!!o.checked;if(Array.isArray(s)){var r=t._i(s,null);o.checked?r<0&&t.$set(t.rule,"apply_on_all_product",s.concat([null])):r>-1&&t.$set(t.rule,"apply_on_all_product",s.slice(0,r).concat(s.slice(r+1)))}else t.$set(t.rule,"apply_on_all_product",a)}}}),t._v(" "),e("label",{attrs:{for:"apply_on_all_product"}},[t._v("\n                                            "+t._s(t.__("Check this if you want to apply this rule on all products.","dokan"))+"\n                                        ")])])]),t._v(" "),e("tr",{directives:[{name:"show",rawName:"v-show",value:t.showProductsDropdown,expression:"showProductsDropdown"}]},[e("th",[t._v(t._s(t.__("Select Products","dokan")))]),t._v(" "),e("td",[e("multiselect",{attrs:{id:"ajax",label:"name","track-by":"id",placeholder:t.__("Type to search","dokan"),"open-direction":"bottom",options:t.requested_products,multiple:!0,searchable:!0,"internal-search":!1,"clear-on-select":!0,"close-on-select":!1,"options-limit":300,limit:10,"limit-text":t.limitText,"max-height":700,"show-no-results":!1,"hide-selected":!0},on:{"search-change":t.searchProducts},model:{value:t.rule.product_ids,callback:function(e){t.$set(t.rule,"product_ids",e)},expression:"rule.product_ids"}},[e("span",{attrs:{slot:"noResult"},slot:"noResult"},[t._v(t._s(t.__("Oops! No elements found. Consider changing the search query.","dokan")))])])],1)]),t._v(" "),e("tr",{directives:[{name:"show",rawName:"v-show",value:t.showProductsDropdown,expression:"showProductsDropdown"}]},[e("th",{staticClass:"cat_text"},[e("label",[e("strong",[t._v(t._s(t.__("Select Categories","dokan")))])])]),t._v(" "),e("td",[e("div",{staticClass:"all_cats"},t._l(t.requestedCategories,(function(s,o){return e("categoryList",{key:s.id,attrs:{label:s.name,nodes:s.children,hasChildren:s.hasChildren,id:s.id,savedCategories:t.rule.category_ids,depth:0},on:{clickedCategory:t.checkCategory}})})),1)])]),t._v(" "),e("tr",[e("th",[t._v(t._s(t.__("Hide Price","dokan")))]),t._v(" "),e("td",[e("select",{directives:[{name:"model",rawName:"v-model",value:t.rule.hide_price,expression:"rule.hide_price"}],attrs:{name:"hide_price",id:"announcement_sender_type"},on:{change:function(e){var s=Array.prototype.filter.call(e.target.options,(function(t){return t.selected})).map((function(t){return"_value"in t?t._value:t.value}));t.$set(t.rule,"hide_price",e.target.multiple?s:s[0])}}},[e("option",{attrs:{value:"1"}},[t._v(t._s(t.__("Yes","dokan")))]),t._v(" "),e("option",{attrs:{value:"0"}},[t._v(t._s(t.__("No","dokan")))])])])]),t._v(" "),e("tr",[e("th",[t._v(t._s(t.__("Hide Price Text","dokan")))]),t._v(" "),e("td",[e("input",{directives:[{name:"model",rawName:"v-model",value:t.rule.hide_price_text,expression:"rule.hide_price_text"}],attrs:{type:"text",size:"50",autocomplete:"off"},domProps:{value:t.rule.hide_price_text},on:{input:function(e){e.target.composing||t.$set(t.rule,"hide_price_text",e.target.value)}}})])]),t._v(" "),e("tr",[e("th",[t._v(t._s(t.__("Hide Add to Cart Button","dokan")))]),t._v(" "),e("td",[e("select",{directives:[{name:"model",rawName:"v-model",value:t.rule.hide_cart_button,expression:"rule.hide_cart_button"}],attrs:{name:"hide_cart_button"},on:{change:function(e){var s=Array.prototype.filter.call(e.target.options,(function(t){return t.selected})).map((function(t){return"_value"in t?t._value:t.value}));t.$set(t.rule,"hide_cart_button",e.target.multiple?s:s[0])}}},[e("option",{attrs:{value:"replace"}},[t._v(t._s(t.__("Replace Add to Cart button with a Quote Button","dokan")))]),t._v(" "),e("option",{attrs:{value:"keep_and_add_new"}},[t._v(t._s(t.__("Keep Add to Cart button and add a new Quote Button","dokan")))])])])]),t._v(" "),e("tr",[e("th",[t._v(t._s(t.__("Custom Button Label","dokan")))]),t._v(" "),e("td",[e("input",{directives:[{name:"model",rawName:"v-model",value:t.rule.button_text,expression:"rule.button_text"}],attrs:{type:"text",name:"button_text",size:"30",autocomplete:"off",required:"required"},domProps:{value:t.rule.button_text},on:{input:function(e){e.target.composing||t.$set(t.rule,"button_text",e.target.value)}}}),t._v(" "),e("div",[t._v("\n                                            "+t._s(t.__('Display the above label on custom button, e.g "Request a Quote"',"dokan"))+"\n                                        ")])])])])])],1)]),t._v(" "),e("div",{staticClass:"postbox-container",attrs:{id:"postbox-container-1"}},[e("postbox",{attrs:{title:t.__("Publish","dokan"),extraClass:"quote-actions"}},[e("div",{staticClass:"action"},[e("input",{staticClass:"button button-default draft-btn",attrs:{type:"submit",disabled:t.loadSpinner},domProps:{value:t.draftBtnLabel},on:{click:function(e){return e.preventDefault(),t.createQuoteRules("draft")}}}),t._v(" "),t.loadSpinner?e("span",{staticClass:"spinner"}):t._e(),t._v(" "),e("input",{staticClass:"button button-primary publish-btn",attrs:{type:"submit",disabled:t.loadSpinner},domProps:{value:t.publishBtnLabel},on:{click:function(e){return e.preventDefault(),t.createQuoteRules(t.createStatus)}}}),t._v(" "),e("div",{staticClass:"clear"})])]),t._v(" "),e("postbox",{attrs:{title:t.__("Rule priority","dokan"),extraClass:"quote-actions"}},[e("div",{staticStyle:{"margin-bottom":"10px"}},[e("strong",[t._v(t._s(t.__("Order","dokan")))])]),t._v(" "),e("input",{directives:[{name:"model",rawName:"v-model",value:t.rule.rule_priority,expression:"rule.rule_priority"}],attrs:{type:"number",autocomplete:"off",required:"required"},domProps:{value:t.rule.rule_priority},on:{input:function(e){e.target.composing||t.$set(t.rule,"rule_priority",e.target.value)}}})])],1)]),t._v(" "),e("br",{staticClass:"clear"})])])],1)}),[],!1,null,null,null).exports;dokan_add_route(a),dokan_add_route(l),dokan_add_route(g),dokan_add_route(x)})();